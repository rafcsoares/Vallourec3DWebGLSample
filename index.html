<!DOCTYPE html>

<html>
	<head>
		<link rel="icon" href="TemplateData/favicon.png">
		<link rel="stylesheet" href="TemplateData/style.css">
		<!-- Product name as page title -->
		<title>Vallourec3D</title>
	</head>	
	
	<body>
		<!-- The webgl canvas will be loaded inside gameContainer -->
		<div id="gameContainer"></div>

		<div class="pre-loader">			
			<img class="logo" src="TemplateData/logo.png"/>
			<h3 class="title">LOADING...</h3>
			<div class="progress-bar">
				<div class="fill"></div>
			</div>

		</div>

	</body>

	<!-- UnityLoader.js is enqueued here -->
	<script src="Build/20986a4044eaa8551db6be07233cc1d9.js"></script>

	<script type="text/javascript">
	var gameInstance = UnityLoader.instantiate("gameContainer", "Build/c57bfc91641b913a9e398dbabb390d37.json", {
    	Module: 
	{
        	"webglContextAttributes": {"preserveDrawingBuffer": true},
    	},
	onProgress: function(gameInstance, progress)
	{

		if (!gameInstance.Module)
			return;

		//Get the preloader element
		const preLoader = document.querySelector(".pre-loader");
		//Get the progressBar fill element
		const progressBarFill = preLoader.querySelector(".progress-bar .fill");	


		if (!gameInstance.progress) 
		{    
			//Show the progress fill
			preLoader.style.display = "flex";
			//Assign to use the progress bar fill
			gameInstance.progress = progressBarFill;
		}

		gameInstance.progress.style.transform = `scaleX(${progress})`;

		//If unity finished loading
		if (progress === 1 && !gameInstance.removeTimeout) 
		{
			//Hide the preloader with a delay
			gameInstance.removeTimeout = setTimeout(function() 
			{
				//Hide the preloader
				preLoader.style.display = "none"

			}, 500);
		}

	}});
  	</script>

</html>